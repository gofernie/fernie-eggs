---
const { dozens = 0 } = Astro.props;
const inStock = Number(dozens) > 0;
---

<style>
  .stage{
    position: relative;
    width: 100%;
    height: 140px;              /* ✅ enough room for legs */
    display:flex;
    justify-content:center;
    align-items:flex-end;        /* ✅ feet sit on the “ground” */
    pointer-events:none;
    overflow: visible;           /* ✅ never clip SVG */
  }

  .chicken{
    width: 220px;                /* a bit bigger */
    height: auto;
    transform-origin: 50% 100%;
    filter: drop-shadow(0 16px 18px rgba(0,0,0,0.10));
    animation: bob 0.7s ease-in-out infinite;
  }

  /* happy in-stock bob */
  .stage[data-state="instock"] .chicken{
    animation-duration: 0.6s;
  }

  /* slower, sad bob */
  .stage[data-state="soldout"] .chicken{
    animation-duration: 1.4s;
    opacity: 0.92;
  }

  @keyframes bob{
    0%,100%{ transform: translateY(0); }
    50%{ transform: translateY(-4px); }
  }

  .wing{
    transform-origin: 92px 86px;
    animation: flap 1.1s ease-in-out infinite;
  }

  @keyframes flap{
    0%,100%{ transform: rotate(0deg); }
    50%{ transform: rotate(-8deg); }
  }
</style>

<div class="stage" data-state={inStock ? "instock" : "soldout"} data-dozens={String(dozens)}>
  <svg class="chicken" viewBox="0 0 180 140" role="img" aria-label="Chicken">
    <ellipse cx="92" cy="82" rx="54" ry="38"
      fill="rgba(255,255,255,0.92)" stroke="rgba(0,0,0,0.12)" />

    <path d="M40 78 C20 70, 20 95, 40 92 C30 84, 30 82, 40 78 Z"
      fill="rgba(255,255,255,0.88)" stroke="rgba(0,0,0,0.10)"/>

    <circle cx="132" cy="64" r="22"
      fill="rgba(255,255,255,0.94)" stroke="rgba(0,0,0,0.12)"/>

    <path d="M126 42 C130 34, 138 34, 142 42 C146 34, 154 34, 156 44 C152 48, 146 50, 140 48 C136 50, 130 50, 126 46 Z"
      fill="rgba(210,80,60,0.78)" stroke="rgba(0,0,0,0.10)"/>

    <path d="M152 66 L170 72 L152 78 Z"
      fill="rgba(210,150,60,0.78)" stroke="rgba(0,0,0,0.10)"/>

    <circle cx="138" cy="62" r="3" fill="rgba(20,18,16,0.85)"/>

    <path class="wing"
      d="M92 76 C76 74, 66 84, 76 96 C88 110, 112 104, 114 88 C114 78, 106 78, 92 76 Z"
      fill="rgba(255,255,255,0.72)" stroke="rgba(0,0,0,0.10)"/>

    <path d="M86 112 L84 130"
      stroke="rgba(140,95,45,0.75)" stroke-width="4" stroke-linecap="round"/>

    <path d="M108 112 L110 130"
      stroke="rgba(140,95,45,0.75)" stroke-width="4" stroke-linecap="round"/>
  </svg>
</div>
